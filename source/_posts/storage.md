---
title: Storage in a Windows 8 App
categories: [App Development]
tags: []
date: 2012-09-26
alias:
- post/2012/09/26/storage.aspx
- post/2012/09/26/storage/
---

Apps generate data. Some of them generate a ton of data and others just a few little bits and pieces. Allow me to enumerate your options for storing stuff when you're working on an app for Windows 8\. There are subtle differences between the way storage is done in an HTML/JS app versus a .NET or a C++, but for most of the techniques you're just accessing the WinRT library so the steps are practically identical.

Before we enumerate the types of storage, let's talk about the types of data that typically get generated in an app. I'll break them up into application state, user settings, application data, and user data.

## Application State

Application state (or session state) is the data that pertains to what the user is doing in their use of an app. If the user has browsed to the registration page and starting typing their name and address in, then that data is session state. If the user has to drop their tablet (figuratively of course), switch apps, or something else and doesn't get back to it for some time, then the kind thing (only humane option?) to do is remember their state and restore it when they return.

## User Settings

A user has preferences. Your user might want the music in their game turned off. They might want to choose a theme color. They might want to turn on automatic social sharing. These are preferences. They usually take up hardly any space, but it's they're really important to your user. The best thing to do is store them in the cloud instead of just on a device so the user feels like they are remembered wherever they go.

## Application Data

Application data is the data generated by your app that may have everything in the world to do with your user, but your user is going to assume that the app is holding that data for him and doesn't want to manage it himself outside of the app. If you installed a task list app, you'd expect it to hold tasks for you, right? That's app data. The line can be blurry between app data and user data, so read on.

## User Data

User data is data generated by the app, but belongs more to the user than the app. The user expects to be able to send the data to a friend, open it in a different program, or back it up to the cloud. User data is everything you find in the libraries &ndash; the documents library, the music library, etc.

## Implementation

So, let's talk about how to implement these.

**Application state **can be stored in WinJS.Application.sessionState. That's an object that WinJS and Windows handle for you and plays well with the lifecycle of your app. Saving to the sessionState object couldn't be easier. Just issue a command like...

``` js
WinJS.Application.sessionState = {
    currentPage: "widgets",
    formFields: {
        firstName: "Tom",
        lastName: "Jones"
    }
};
```

You could do this anytime during the use of your app or you could wait until the app.oncheckpoint event (look on your default.js page for that) and just do it when your app is on it's way out of the spotlight.

Keep in mind that this is for session data only. Windows assumes that if your user explicitly ends the app, they are ending their session and sessionState is not stored. You also can't count on it after an application crash, so make sure it's only transient data that wouldn't ruin the users day to lose.

**User settings **are again very important. You have many options for storing them, but only two that I recommend. The first is localSettings and the second is roamingSettings. Only use localSettings if you have good reason not to roam the setting to the cloud. If you use roamingSettings and the user doesn't have a Microsoft account, it will still store locally. Both of these are accessed from Windows.Storage.ApplicationData.current. You can store a new setting value like this...

``` js
localSettings.values["gameMusic"] = "off";
```

**Application data **can work much like the user settings technically, but it serves a different purpose. Imagine the task list app I mentioned before. The tasks themselves must obviously be stored and you - the developer - have quite a variety of options. You have to ask yourself a few questions like:

*   Does the user need to share the app data with select others?
*   Does the user need access to the data on multiple devices?
*   Does the data feed any other apps either on the same or another platform?

It's very possible that just storing data local to the device is plenty. In that case, the localFolder from Windows.Storage.ApplicationData.current. This spot is dedicated to storing data for your app and your app only. No other apps have access to it actually.

If you have a very small amount of application data (less than 100k) then you can use the roamingFolder from the same Windows.Storage.ApplicationData.current. This data will, just like the roamingSettings, be synced to the user's online profile and back down to any other devices they might log in to.

You have a variety of other options for storing data such as a local database, online database, online user drive, and more, but I'll save those for another day and another post.

Finally, we'll talk about **user data**. Unlike application data, users will expect to have ownership of their user data. When a user creates a spreadsheet, this is not data that just exists inside of Excel. The user expects to have that spreadsheet in their documents and be able to work with it (share it, rename it, organize it, ...) outside of Excel.

If your app is one that will work with user data, then you need to pick a file format and create the association. This is done in the _package.appxmanifest_ where you'll also need to add a capability to access the users documents. It's quite a easy thing to use the open and save file dialogs from your app and the user will love having full access not only to his documents, but also all apps he has installed that implement the FilePicker contract.

That's quite enough on storage for now. Perhaps some of the following locations from within the Windows Dev Center will be helpful to you...

[Storage and state reference](http://msdn.microsoft.com/en-us/library/windows/apps/br212883.aspx)

[Windows.Storage namespace](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.aspx)

[WinJS.Application.sessionState object](http://msdn.microsoft.com/en-us/library/windows/apps/hh440965.aspx)

[How to suspend an app](http://msdn.microsoft.com/en-us/library/windows/apps/hh465138.aspx)

[Manage app lifecycle and state](http://msdn.microsoft.com/en-us/library/windows/apps/Hh986966.aspx)

[Optimizing your app's lifecycle](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781221.aspx)

Have fun.